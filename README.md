# FastAPI Сервис Управления Отпусками

## Обзор
Этот проект представляет собой веб-систему управления отпусками сотрудников, реализованную с помощью FastAPI. Он позволяет организациям управлять отпусками сотрудников, предоставляя такие функции, как создание записи отпуска, просмотр последних отпусков, проверка отпусков в определенный период времени и удаление записи отпуска.

## Структура
Проект состоит из следующих основных файлов:
- `main.py`: содержит API-эндпоинты.
- `database.py`: управляет подключением к базе данных и сессиями.
- `models.py`: определяет модели данных с использованием Pydantic и SQLAlchemy ORM.
- `crud.py`: реализует операции CRUD (Создание, Чтение, Обновление, Удаление) для обработки данных об отпусках.
- 'index.html': HTML-форма для взаимодействия с эндпоинтами.

### main.py
Файл содержит экземпляр приложения FastAPI и определяет следующие эндпоинты:

- POST /vacations/VacationCreate: Создает новую запись об отпуске.
- GET /vacations/read_latest_vacations/{employee_id}: Получает последние три записи об отпусках конкретного сотрудника.
- GET /vacations/read_latest_ten_vacations: Получает последние десять записей об отпусках (дополнительная функция).
- GET /vacations/read_vacations_by_date: Проверяет, кто находится в отпуске в заданный период дат.
- DELETE /vacations/delete/{vacation_id}: Удаляет запись об отпуске по его ID.

Приложение также включает middleware для обработки кросс-доменных запросов (CORS).

### database.py
Определяет подключение к базе данных MySQL с использованием SQLAlchemy, создает сессию и инициализирует схему базы данных.

### models.py
Определяет модели Pydantic для проверки и сериализации входных и выходных данных, а также модели SQLAlchemy для представления таблиц базы данных:

- VacationBase: Базовая модель для данных об отпуске.
- VacationCreate: Наследуется от VacationBase для создания нового отпуска.
- Vacation: Наследуется от VacationBase и включает ID отпуска.
- VacationModel: Модель SQLAlchemy, представляющая таблицу отпусков в базе данных.

### crud.py
Содержит логику для операций CRUD:

- create_vacation: Добавляет новую запись об отпуске в базу данных.
- read_vacations_by_date: Получает отпуски в заданном диапазоне дат.
- read_latest_vacations: Получает последние три отпуска сотрудника.
- read_latest_ten_vacations: Получает последние десять отпусков (не включено в первоначальное ТЗ).
- delete_vacation: Удаляет запись об отпуске из базы данных.

## Установка
1. Клонируйте репозиторий.
2. Установите требуемые зависимости, используя `pip install -r requirements.txt`.
3. Установие базу данных 'vacations_staff.sql', я использовал MySQL Workbench 8.0 CE и MySQL Server 8.0
4. Настройте подключение к базе данных в `database.py`.
5. Запустите сервер, используя `uvicorn main:app --reload`.

## Использование
Вы можете взаимодействовать с API, используя предоставленные эндпоинты. Например, чтобы посмотреть три последних отпуска для конкретного сотрудника, отправьте GET-запрос на /vacations/read_latest_vacations/{employee_id} с необходимым ID. Проект тестировался на локальном сервере, реальный пример для тестирования - http://127.0.0.1:8000/vacations/read_latest_vacations/1. 
Вы также можете ознакомиться с эндпоинтами перейдя по ссылке - http://127.0.0.1:8000/docs#/
Если вы также как и я запускаете проект локально то увидите:
![Демонстрация](http://g.recordit.co/JTSMVfdBuB.gif)
## Тестирование
Файл test_main.py включает тесты для эндпоинтов API. Используйте тестовый фреймворк pytest, чтобы запустить эти тесты и убедиться в целостности приложения.
В проекте использовался инструмент для статической проверки кода mypy. Вы можете запустить её сами командой в терминале - mypy "ваш путь к проекту\VacationsProject"
![image](https://github.com/Riddars/FastAPI-Vacation-Management-Service/assets/80139269/000a58a0-1ad2-4e07-812b-c34b6a297c97)


## Фронтенд
Проект включает простую HTML-форму для взаимодействия с эндпоинтами. Если установка всех зависимостей, базы данных и запуск локального сервера сделаны правильно, вы можете работать с БД через эту форму.
## Демонстрация работы
![Демонстрация](http://g.recordit.co/moWnQc69A0.gif)

